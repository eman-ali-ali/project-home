Drupal.behaviors.legrand_notification_bar = {
  attach: function (context, settings) {


    if (localStorage.getItem("set_notification") == null){
      jQuery('.header-simple--notif').once().load(Drupal.url('notification-bar/get-content'), function() {

        jQuery("#hide-notif").click(function () {
          var $lrHeaderCookies = jQuery(".header-simple .header-simple--notif");
          $lrHeaderCookies.toggleClass("hide-notif");
          jQuery(".header-simple").removeClass("header-notif-top");
          localStorage.setItem("set_notification",true);
          if(jQuery(window).width() >= 560){
            jQuery(".page-bim ol.breadcrumb").css('padding-top', '2.5rem');
          }
        });

      });
    }

  }
};








;
(function ($, Drupal, drupalSettings) {
  Drupal.behaviors.legrand_access_b2b_b2c = {
    attach: function (context, settings) {

      // Redirect to B2C home page when front url is requested and value of cookie = true.
      if (window.location.href === drupalSettings.legrand_ecat_b2b_b2c.current_path && $.cookie('is_b2c') !== undefined && JSON.parse($.cookie('is_b2c')).b2c === true) {
        window.location.replace(drupalSettings.legrand_ecat_b2b_b2c.current_path + drupalSettings.legrand_ecat_b2b_b2c.b2c_prefix)
      } else {
        // Get current date.
        var date = new Date();
        // Set Date + 1 day.
        date.setDate(date.getDate() + 365);
        var expires = "; expires=" + date.toGMTString();
        // Set cookie.
        document.cookie = "is_b2c=" + encodeURIComponent(JSON.stringify(drupalSettings.legrand_ecat_b2b_b2c.b2c_cookie)) + expires + "; path=/";
      }

      // When B2B button is clicked remove cookie to allow acces to b2b when b2c cookie is true.
      $('.yCmsComponent.yCmsComponent-space-link').on('click', function () {
        if ($(this).find("span").text(drupalSettings.legrand_ecat_b2b_b2c.b2b_button_text)) {
          // Remove cookie.
          document.cookie = "is_b2c" +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }
      });

    }
  };
}(jQuery, Drupal, drupalSettings));

;
/**
 * DO NOT EDIT THIS FILE.
 * See the following change record for more information,
 * https://www.drupal.org/node/2815083
 * @preserve
 **/
Drupal.behaviors.legrand_common_helper = {
  attach: function (context, settings) {

    let current_url = window.location;
    let event = "";
    let searchFilterLabel = "";
    let searchAddQuery = "";

   /*
   * EVENTS GTM FILTER Search.
   */
    let param_search_news = new URLSearchParams(current_url.search.slice(1)).get('combine_search_news');
    let param_search_training = new URLSearchParams(current_url.search.slice(1)).get('combine_search_training');
    let param_search_faq = new URLSearchParams(current_url.search.slice(1)).get('combine_search_faq');
    let param_search_zip_poi = new URLSearchParams(current_url.search.slice(1)).get('search_address_poi');
    let param_search_zip_poi_map = new URLSearchParams(current_url.search.slice(1)).get('search_address_poi_map');
    let param_acquia_search = new URLSearchParams(current_url.search.slice(1)).get('search');
    // Event Onsubmit  Search news
    if(param_search_news){
      event = "searchAddQuery";
      searchAddQuery = param_search_news ;
    }
    // Event OnSubmit  Search training
    else if(param_search_training){
      event = "searchAddQuery";
      searchAddQuery = param_search_training ;
    }
    // Event OnSubmit  Search faq
    else if(param_search_faq){
      event = "searchAddQuery";
      searchAddQuery = param_search_faq ;
    }
    // Event OnSubmit  Search zip code POI
    else if(param_search_zip_poi){
      event = "searchAddQuery";
      searchAddQuery = param_search_zip_poi ;
    }
    else if(param_search_zip_poi_map){
      event = "searchAddQuery";
      searchAddQuery = param_search_zip_poi_map ;
    }
    // Event OnSubmit Acquia Search
    else if(param_acquia_search){
      event = "searchAddQuery";
      searchAddQuery = param_acquia_search ;
    }

     /*
     * EVENTS GTM FILTER Checkbox.
     */
    let params_news_type = new URLSearchParams(current_url.search.slice(1)).getAll('field_news_type_target_id[]');
    let params_ref_type = new URLSearchParams(current_url.search.slice(1)).getAll('field_type_reference_target_id[]');
    let params_train_type = new URLSearchParams(current_url.search.slice(1)).getAll('field_training_type_target_id[]');
    let params_download_type = new URLSearchParams(current_url.search.slice(1)).getAll('field_document_type_target_id[]');
    let params_add_filter_poi = new URLSearchParams(current_url.search.slice(1)).getAll('additional_filters_target_id[]');
    let params_add_filter_poi_map = new URLSearchParams(current_url.search.slice(1)).getAll('additional_filters_target_id_map[]');
    let params_filter_acquia = new URLSearchParams(current_url.search.slice(1)).get('datasource[]');
    let pageType = '';
    // Event OnSubmit  Filter Type News , Faq , training , downloads listing
    if (params_news_type.length || params_ref_type.length || params_train_type.length || params_download_type.length ) {
      let selected_type = jQuery("input[type=checkbox]:checked").map(function () {
        return jQuery(this).attr("id");
      }).get();
      event = "searchFilterLabel";
      searchFilterLabel =  selected_type.join("/") ;
    }
    // Event OnSubmit  Filter Area where to buy
    else if(params_add_filter_poi.length || params_add_filter_poi_map.length ){
      let selected_area = jQuery("input[type=checkbox]:checked").map(function () {
        return jQuery(this).next("label").text();
      }).get();
      let params_areas = selected_area.filter(function(elem, index, self) {
        return index === self.indexOf(elem);
      });
      event = "searchFilterLabel";
      searchFilterLabel =  params_areas.join("/") ;
      pageType = 'Search Product Page - New';
    }
    // Event OnSubmit  Search Aquia
    else if( params_filter_acquia ){
      event = "searchFilterLabel";
      if(params_filter_acquia === "entity:node" ){
        searchFilterLabel =  "webpages" ;
       pageType = 'Search Webpage  - New';
      }
      else if (params_filter_acquia === "entity:file"){
        searchFilterLabel =  "documents" ;
        pageType = 'Search Document Page  - New';
      }else{
        searchFilterLabel =  "all" ;
      }
    }

    // submit datalayer
    if(event){
      dataLayer.push({
        'event': event ,
        'searchFilterLabel': searchFilterLabel,
        'searchFilterQuery': searchAddQuery,
        'pageType':pageType,
        'viewType':'List'
      });
    }

    /*
     * EVENTS GTM CTA.
     */
    // Event Onclick CTA I don't find a store
    jQuery('#cta--find-store').click(function () {
      dataLayer.push({'event': 'clickCTAFindStore','pageType':'POI – Where to buy','viewType':'Block'});
    });
    // Event Onclick CTA I list my store
    jQuery('#cta--list-store').click(function () {
      dataLayer.push({'event': 'clickCTAListStore','pageType':'POI – Where to buy','viewType':'Block'});
    });
    // Event Onclick CTA Have a project? Tell us
    jQuery('#cta--about-project').click(function () {
      dataLayer.push({'event': 'clickCTAProject','pageType': 'Project page','viewType':'Block'});
    });
    // Event Onclick CTA Ask a question FAQ
    jQuery('#cta--ask-question').click(function () {
      dataLayer.push(
        {'event': 'clickCTAAsqQuestion','pageType': 'FAQ','viewType':'Block' });
    });
    // Event Onclick CTA FAQ
    jQuery('#cta--access-faq').click(function () {
      dataLayer.push({'event': 'clickCTAFaq','pageType': 'FAQ','viewType':'Block' });
    });
    // Event Onclick CTA Training
    jQuery('#cta--access-training').click(function () {
      dataLayer.push({'event': 'clickCTATraining'});
    });
    // Event Onclick CTA Ask for a new training
    jQuery('#cta--ask-training').click(function () {
      dataLayer.push({'event': 'clickCTAAsqNewTraining'});
    });
    // Event Onclick CTA Contact us
    jQuery('#cta--access-contact').click(function () {
      dataLayer.push({'event': 'clickCTAContact','pageType': 'Contact','viewType':'Block'});
    });
    // Event Onclick CTA NEWSROOM
    jQuery('#cta--press-external').click(function () {
      dataLayer.push({'event': 'clickCTANewsRoom'});
    });

  }
};
;
/**
 * DO NOT EDIT THIS FILE.
 * See the following change record for more information,
 * https://www.drupal.org/node/2815083
 * @preserve
 **/

(function ($, Drupal, drupalSettings) {
  Drupal.behaviors.legrand_common_helper = {
    attach: function (context, settings) {

      /*
       * GTM NO ECOM EVENTS.
       */

      $('.add-doc-to-project-list', context).click(function () {
        var sku = jQuery(this).parents('.card-document').find('.text-product-ref').data("sku");
        var cat = jQuery(this).parents('.card-document').find('.document-type').data("document-type");
        dataLayer.push({
          'event': 'addToProjectList',
          'ressourceType': 'Document',
          'ressourceCategory': cat,
          'ressourceSKU': sku,
        });
      });
      var productSourceRelated = '';
      var categoryName = '';
      $('.related-product-item').on('click',function (){
        productSourceRelated = $(this).parents('.card-product').find('.text-product-ref').data('sku');
        categoryName = $(this).parents('.card-product').find('.text-product-ref').data('category-name');
      });
      $('.add-to-project-list', context).click(function () {
       var  sku = '';
        if ($('#is-product-detail').length > 0 && productSourceRelated == ''){
          sku =  $(".product-detail-item").parents('#product-detail-section').data('product-sku');
          categoryName = $(".product-detail-item").parents('#product-detail-section').data('category-name');
        }
        let ressourceSKU =  sku ? sku : productSourceRelated
        dataLayer.push({
          'event': 'addToProjectList',
          'ressourceType': 'Products',
          'ressourceSKU':ressourceSKU ,
          'ressourceCategory' : categoryName
        });
      });


      $('.deleteProduct-seo', context).click(function () {
        var sku = jQuery(this).data('sku');
        let category = jQuery(this).data('category');
        dataLayer.push({
          'event': 'removeFromProjectList',
          'ressourceType': 'Product',
          'ressourceSKU': sku,
          'ressourceCategory': category,
        });
      });
      $('#delete-cart', context).click(function () {
       var sku =  jQuery(this).data('cart')
        dataLayer.push({
          'event': 'removeFromProjectList',
          'ressourceType': 'Product',
          'ressourceSKU': sku,
        });
      });

      $('.deleteDoc-seo', context).click(function () {
        var sku = jQuery(this).parents('.row-doc').data('sku');
        sku = sku ?? $('#delete-cart').data('sku');
        dataLayer.push({
          'event': 'removeFromProjectList',
          'ressourceType': 'Document',
          'ressourceSKU': sku,
        });
      });

      $('#download-pdf', context).click(function () {
        var quantityProds = $('.totalAllproducts').attr('count-product');
        var  qauntityDoc = $('.totalAllDoc').attr('totalalldoc');
        dataLayer.push({
          'event': 'downloadProjectList',
          'productQuantity': quantityProds,
          'documentQuantity' : qauntityDoc,
        });
      });
      $('#send-email-zip-link', context).click(function () {
        var quantityProds = $('.totalAllproducts').attr('count-product');
        var  qauntityDoc = $('.totalAllDoc').attr('totalalldoc');
        dataLayer.push({
          'event': 'downloadProjectList',
          'productQuantity': quantityProds,
          'documentQuantity' : qauntityDoc,
        });
      });

      $('#data-filter input', context).click(function () {
        dataLayer.push({
          'event': 'productAddFilter',
          'productFilterLabel': jQuery('label[for="' + this.id + '"]').text(),
          'productFilterValue': jQuery(this).is(':checked'),
        });
      });

      $('#suggestion-list a', context).once().click(function () {
       let firstInput =  $(this).find('.autocomplete-suggestion-user-input').text();
       let lastInput = $(this).find('.autocomplete-suggestion-suggestion-suffix').text();
        dataLayer.push({
          'event': 'clickSearchSuggestion',
          'textSuggestion': firstInput + lastInput
        });
      });

      $('select[id*="edit-sort-by"]', context).on('change', function () {
        dataLayer.push({
          'event': 'productSort',
          'sortValue': jQuery(this).find("option:selected").text(),
        });
      });

      $('select[id*="edit-items-per-page"]', context).on('change', function () {
        dataLayer.push({
          'event': 'productShow',
          'showValue': jQuery(this).find("option:selected").text(),
        });
      });

      $('.compare-check', context).click(function () {
        var sku = jQuery(this).parents('.card-product').find('.text-product-ref').data("sku");
        dataLayer.push({
          'event': 'productCompare',
          'ressourceSKU': sku,
        });
      });

      $('.slider-nav .slider-nav-item', context).click(function () {
        dataLayer.push({
          'event': 'productCarrousel',
          'ressourceSKU': jQuery('#sku-product').text(),
        });
      });

      $('.link-zoom', context).click(function () {
        dataLayer.push({
          'event': 'productZoom',
          'ressourceSKU': jQuery('#sku-product').text(),
        });

      });

      $('#pdp-find-store', context).click(function () {
        dataLayer.push({
          'event': 'productFind',
          'ressourceSKU': jQuery('#sku-product').text(),
        });

      });

      $('#pdp-tabs .nav-item', context).click(function () {
        dataLayer.push({
          'event': 'productTab',
          'ressourceSKU': jQuery('#sku-product').text(),
        });
      });

      $('#DOCUMENTATION .nav-link', context).click(function () {
        dataLayer.push({
          'event': 'documentationTab',
          'ressourceSKU': jQuery('#sku-product').text(),
        });
      });

      $('.doc-item', context).click(function () {
        dataLayer.push({
          'event': 'documentDownload',
          'ressourceSKU': jQuery('#sku-product').text(),
          'ressourceCategory': jQuery(this).parents('.document-list').find('.document-type span').text(),
        });
      });

      /* get_in_touch_form_submit */
      jQuery.fn.webformGTMTrackingGetInTouch = function(req) {
        const data = req;
        if(
          data['last_name'] !== '' && 
          data['company_name'] !== '' && 
          data['email']  !== '' && 
          data['gdpr_consent_text'] == 1) {
            // GA4
            // get_in_touch_form_submit
            // This events fires when an user submit the "Get in touch" form.
            window.dataLayer.push({
              event: 'get_in_touch_form_submit'
            });
        }
      };


      /* register_warrantly */
      jQuery.fn.webformGTMTrackingWarrantyRegistration = function(req) {
        const data = req;
        if(
          data['customer_name'] !== '' && 
          data['address_located'] !== '' && 
          data['email']  !== '' && 
          data['gdpr_consent_text'] == 1) {
            // GA4
            // register_warrantly
            // This events fires when an user submit the "Warrantly Registration" form.
            window.dataLayer.push({
              event: 'register_warrantly'
            })
        }
      };

    }
  };
})(jQuery, Drupal, drupalSettings);
;
/*! lozad.js - v1.16.0 - 2020-09-10
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2020 Apoorv Saxena; Licensed MIT */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.lozad=e()}(this,function(){"use strict";
/**
   * Detect IE browser
   * @const {boolean}
   * @private
   */var g="undefined"!=typeof document&&document.documentMode,v=function(t){return window&&window[t]},h=["data-iesrc","data-alt","data-src","data-srcset","data-background-image","data-toggle-class"],p={rootMargin:"0px",threshold:0,enableAutoReload:!1,load:function(t){if("picture"===t.nodeName.toLowerCase()){var e=t.querySelector("img"),r=!1;null===e&&(e=document.createElement("img"),r=!0),g&&t.getAttribute("data-iesrc")&&(e.src=t.getAttribute("data-iesrc")),t.getAttribute("data-alt")&&(e.alt=t.getAttribute("data-alt")),r&&t.append(e)}if("video"===t.nodeName.toLowerCase()&&!t.getAttribute("data-src")&&t.children){for(var a=t.children,o=void 0,i=0;i<=a.length-1;i++)(o=a[i].getAttribute("data-src"))&&(a[i].src=o);t.load()}t.getAttribute("data-poster")&&(t.poster=t.getAttribute("data-poster")),t.getAttribute("data-src")&&(t.src=t.getAttribute("data-src")),t.getAttribute("data-srcset")&&t.setAttribute("srcset",t.getAttribute("data-srcset"));var n=",";if(t.getAttribute("data-background-delimiter")&&(n=t.getAttribute("data-background-delimiter")),t.getAttribute("data-background-image"))t.style.backgroundImage="url('"+t.getAttribute("data-background-image").split(n).join("'),url('")+"')";else if(t.getAttribute("data-background-image-set")){var d=t.getAttribute("data-background-image-set").split(n),u=d[0].substr(0,d[0].indexOf(" "))||d[0];// Substring before ... 1x
u=-1===u.indexOf("url(")?"url("+u+")":u,1===d.length?t.style.backgroundImage=u:t.setAttribute("style",(t.getAttribute("style")||"")+"background-image: "+u+"; background-image: -webkit-image-set("+d+"); background-image: image-set("+d+")")}t.getAttribute("data-toggle-class")&&t.classList.toggle(t.getAttribute("data-toggle-class"))},loaded:function(){}};
/**
   *
   * @param {string} type
   *
   */function k(t){t.setAttribute("data-loaded",!0)}var y=function(t){return"true"===t.getAttribute("data-loaded")},w=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return t instanceof Element?[t]:t instanceof NodeList?t:e.querySelectorAll(t)};return function(){var r,a,e,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign({},p,t),n=i.root,d=i.rootMargin,u=i.threshold,g=i.enableAutoReload,s=i.load,c=i.loaded,l=void 0,b=void 0;v("IntersectionObserver")&&(l=new IntersectionObserver((r=s,a=c,function(t,e){t.forEach(function(t){(0<t.intersectionRatio||t.isIntersecting)&&(e.unobserve(t.target),y(t.target)||(r(t.target),k(t.target),a(t.target)))})}),{root:n,rootMargin:d,threshold:u})),v("MutationObserver")&&g&&(b=new MutationObserver((e=s,function(t){t.forEach(function(t){y(t.target)&&"attributes"===t.type&&-1<h.indexOf(t.attributeName)&&e(t.target)})})));for(var f,m=w(o,n),A=0;A<m.length;A++)(f=m[A]).getAttribute("data-placeholder-background")&&(f.style.background=f.getAttribute("data-placeholder-background"));return{observe:function(){for(var t=w(o,n),e=0;e<t.length;e++)y(t[e])||(l?(b&&g&&b.observe(t[e],{subtree:!0,attributes:!0,attributeFilter:h}),l.observe(t[e])):(s(t[e]),k(t[e]),c(t[e])))},triggerLoad:function(t){y(t)||(s(t),k(t),c(t))},observer:l,mutationObserver:b}}});
;
/**
 * @file
 * Adds Lozad lazy-loading JS functionality.
 */

(function () {
  'use strict';
  Drupal.behaviors.image_lazy_loader = {
    attach: function (context) {
      if (typeof window.lozad === 'function') {
        Drupal.behaviors.image_lazy_loader.observer = lozad();
        Drupal.behaviors.image_lazy_loader.observer.observe();
      }
    }
  };
})(jQuery);
;
